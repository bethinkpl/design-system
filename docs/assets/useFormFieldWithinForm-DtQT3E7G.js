import{F as kt}from"./FormFieldMessage-4M6pD6NX.js";import{e as Y,r as Fe,c as F,u as P,x as ht,O as we,w as ce,C as m,V as Ut,W as Bt,y as Z,B as Dt,X as xt,g as Xe,Y as mt,K as Ke}from"./vue.esm-bundler-BEu-HfQJ.js";function Cr({label:e,state:t,hasRequiredIndicator:r,labelInfo:l,subLabel:u,fieldId:a,messageText:d},f=[]){return{label:e,state:t!=null?t:f[0]?kt.ERROR:void 0,hasRequiredIndicator:r,labelInfo:l,subLabel:u,fieldId:a,messageText:d!=null?d:f[0]}}/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */function z(e){return typeof e=="function"}function yt(e){return e==null}const de=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Je(e){return Number(e)>=0}function zt(e){const t=parseFloat(e);return isNaN(t)?e:t}function Lt(e){return typeof e=="object"&&e!==null}function $t(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function it(e){if(!Lt(e)||$t(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t){return Object.keys(t).forEach(r=>{if(it(t[r])&&it(e[r])){e[r]||(e[r]={}),Ve(e[r],t[r]);return}e[r]=t[r]}),e}function be(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let l=1;l<t.length;l++){if(Je(t[l])){r+=`[${t[l]}]`;continue}r+=`.${t[l]}`}return r}const Wt={};function qt(e){return Wt[e]}function lt(e,t,r){typeof r.value=="object"&&(r.value=E(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function E(e){if(typeof e!="object")return e;var t=0,r,l,u,a=Object.prototype.toString.call(e);if(a==="[object Object]"?u=Object.create(e.__proto__||null):a==="[object Array]"?u=Array(e.length):a==="[object Set]"?(u=new Set,e.forEach(function(d){u.add(E(d))})):a==="[object Map]"?(u=new Map,e.forEach(function(d,f){u.set(E(f),E(d))})):a==="[object Date]"?u=new Date(+e):a==="[object RegExp]"?u=new RegExp(e.source,e.flags):a==="[object DataView]"?u=new e.constructor(E(e.buffer)):a==="[object ArrayBuffer]"?u=e.slice(0):a.slice(-6)==="Array]"&&(u=new e.constructor(e)),u){for(l=Object.getOwnPropertySymbols(e);t<l.length;t++)lt(u,l[t],Object.getOwnPropertyDescriptor(e,l[t]));for(t=0,l=Object.getOwnPropertyNames(e);t<l.length;t++)Object.hasOwnProperty.call(u,r=l[t])&&u[r]===e[r]||lt(u,r,Object.getOwnPropertyDescriptor(e,r))}return u||e}const Ce=Symbol("vee-validate-form"),Kt=Symbol("vee-validate-form-context"),Gt=Symbol("vee-validate-field-instance"),at=Symbol("Default empty value"),Ht=typeof window!="undefined";function Ge(e){return z(e)&&!!e.__locatorRef}function J(e){return!!e&&z(e.parse)&&e.__type==="VVTypedSchema"}function Pe(e){return!!e&&z(e.validate)}function pt(e){return e==="checkbox"||e==="radio"}function Yt(e){return de(e)||Array.isArray(e)}function Xt(e){return Array.isArray(e)?e.length===0:de(e)&&Object.keys(e).length===0}function Ne(e){return/^\[.+\]$/i.test(e)}function Jt(e){return gt(e)&&e.multiple}function gt(e){return e.tagName==="SELECT"}function Qt(e){return bt(e)&&e.target&&"submit"in e.target}function bt(e){return e?!!(typeof Event!="undefined"&&z(Event)&&e instanceof Event||e&&e.srcElement):!1}function D(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,l,u;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(l=r;l--!==0;)if(!D(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!D(l[1],t.get(l[0])))return!1;return!0}if(ot(e)&&ot(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(l=r;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(e=ut(e),t=ut(t),u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(l=r;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[l]))return!1;for(l=r;l--!==0;){var a=u[l];if(!D(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ut(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}function ot(e){return Ht?e instanceof File:!1}function Qe(e){return Ne(e)?e.replace(/\[|\]/gi,""):e}function L(e,t,r){return e?Ne(t)?e[Qe(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((u,a)=>Yt(u)&&a in u?u[a]:r,e):r}function re(e,t,r){if(Ne(t)){e[Qe(t)]=r;return}const l=t.split(/\.|\[(\d+)\]/).filter(Boolean);let u=e;for(let a=0;a<l.length;a++){if(a===l.length-1){u[l[a]]=r;return}(!(l[a]in u)||yt(u[l[a]]))&&(u[l[a]]=Je(l[a+1])?[]:{}),u=u[l[a]]}}function We(e,t){if(Array.isArray(e)&&Je(t)){e.splice(Number(t),1);return}de(e)&&delete e[t]}function st(e,t){if(Ne(t)){delete e[Qe(t)];return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let a=0;a<r.length;a++){if(a===r.length-1){We(l,r[a]);break}if(!(r[a]in l)||yt(l[r[a]]))break;l=l[r[a]]}const u=r.map((a,d)=>L(e,r.slice(0,d).join(".")));for(let a=u.length-1;a>=0;a--)if(Xt(u[a])){if(a===0){We(e,r[0]);continue}We(u[a-1],r[a-1])}}function $(e){return Object.keys(e)}function Ot(e,t=void 0){const r=Xe();return(r==null?void 0:r.provides[e])||mt(e,t)}function Zt(e,t,r){if(Array.isArray(e)){const l=[...e],u=l.findIndex(a=>D(a,t));return u>=0?l.splice(u,1):l.push(t),l}return D(e,t)?r:t}function ct(e,t=0){let r=null,l=[];return function(...u){return r&&clearTimeout(r),r=setTimeout(()=>{const a=e(...u);l.forEach(d=>d(a)),l=[]},t),new Promise(a=>l.push(a))}}function er(e,t){return de(t)&&t.number?zt(e):e}function He(e,t){let r;return async function(...u){const a=e(...u);r=a;const d=await a;return a!==r?d:(r=void 0,t(d,u))}}function Ye(e){return Array.isArray(e)?e:e?[e]:[]}function Ee(e,t){const r={};for(const l in e)t.includes(l)||(r[l]=e[l]);return r}function tr(e){let t=null,r=[];return function(...l){const u=Z(()=>{if(t!==u)return;const a=e(...l);r.forEach(d=>d(a)),r=[],t=null});return t=u,new Promise(a=>r.push(a))}}function qe(e){if(Vt(e))return e._value}function Vt(e){return"_value"in e}function rr(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ie(e){if(!bt(e))return e;const t=e.target;if(pt(t.type)&&Vt(t))return qe(t);if(t.type==="file"&&t.files){const r=Array.from(t.files);return t.multiple?r:r[0]}if(Jt(t))return Array.from(t.options).filter(r=>r.selected&&!r.disabled).map(qe);if(gt(t)){const r=Array.from(t.options).find(l=>l.selected);return r?qe(r):t.value}return rr(t)}function _t(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?de(e)&&e._$$isNormalized?e:de(e)?Object.keys(e).reduce((r,l)=>{const u=nr(e[l]);return e[l]!==!1&&(r[l]=dt(u)),r},t):typeof e!="string"?t:e.split("|").reduce((r,l)=>{const u=ir(l);return u.name&&(r[u.name]=dt(u.params)),r},t):t}function nr(e){return e===!0?[]:Array.isArray(e)||de(e)?e:[e]}function dt(e){const t=r=>typeof r=="string"&&r[0]==="@"?lr(r.slice(1)):r;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((r,l)=>(r[l]=t(e[l]),r),{})}const ir=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function lr(e){const t=r=>{var l;return(l=L(r,e))!==null&&l!==void 0?l:r[e]};return t.__locatorRef=e,t}function ar(e){return Array.isArray(e)?e.filter(Ge):$(e).filter(t=>Ge(e[t])).map(t=>e[t])}const ur={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let or=Object.assign({},ur);const Oe=()=>or;async function St(e,t,r={}){const l=r==null?void 0:r.bails,u={name:(r==null?void 0:r.name)||"{field}",rules:t,label:r==null?void 0:r.label,bails:l!=null?l:!0,formData:(r==null?void 0:r.values)||{}},a=await sr(u,e);return Object.assign(Object.assign({},a),{valid:!a.errors.length})}async function sr(e,t){const r=e.rules;if(J(r)||Pe(r))return dr(t,Object.assign(Object.assign({},e),{rules:r}));if(z(r)||Array.isArray(r)){const f={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},h=Array.isArray(r)?r:[r],c=h.length,g=[];for(let _=0;_<c;_++){const A=h[_],V=await A(t,f);if(!(typeof V!="string"&&!Array.isArray(V)&&V)){if(Array.isArray(V))g.push(...V);else{const W=typeof V=="string"?V:Et(f);g.push(W)}if(e.bails)return{errors:g}}}return{errors:g}}const l=Object.assign(Object.assign({},e),{rules:_t(r)}),u=[],a=Object.keys(l.rules),d=a.length;for(let f=0;f<d;f++){const h=a[f],c=await fr(l,t,{name:h,params:l.rules[h]});if(c.error&&(u.push(c.error),e.bails))return{errors:u}}return{errors:u}}function cr(e){return!!e&&e.name==="ValidationError"}function At(e){return{__type:"VVTypedSchema",async parse(r,l){var u;try{return{output:await e.validate(r,{abortEarly:!1,context:(l==null?void 0:l.formData)||{}}),errors:[]}}catch(a){if(!cr(a))throw a;if(!(!((u=a.inner)===null||u===void 0)&&u.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const d=a.inner.reduce((f,h)=>{const c=h.path||"";return f[c]||(f[c]={errors:[],path:c}),f[c].errors.push(...h.errors),f},{});return{errors:Object.values(d)}}}}}async function dr(e,t){const l=await(J(t.rules)?t.rules:At(t.rules)).parse(e,{formData:t.formData}),u=[];for(const a of l.errors)a.errors.length&&u.push(...a.errors);return{value:l.value,errors:u}}async function fr(e,t,r){const l=qt(r.name);if(!l)throw new Error(`No such validator '${r.name}' exists.`);const u=vr(r.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:u})},d=await l(t,u,a);return typeof d=="string"?{error:d}:{error:d?void 0:Et(a)}}function Et(e){const t=Oe().generateMessage;return t?t(e):"Field is invalid"}function vr(e,t){const r=l=>Ge(l)?l(t):l;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((l,u)=>(l[u]=r(e[u]),l),{})}async function hr(e,t){const l=await(J(e)?e:At(e)).parse(E(t),{formData:E(t)}),u={},a={};for(const d of l.errors){const f=d.errors,h=(d.path||"").replace(/\["(\d+)"\]/g,(c,g)=>`[${g}]`);u[h]={valid:!f.length,errors:f},f.length&&(a[h]=f[0])}return{valid:!l.errors.length,results:u,errors:a,values:l.value,source:"schema"}}async function mr(e,t,r){const u=$(e).map(async c=>{var g,_,A;const V=(g=r==null?void 0:r.names)===null||g===void 0?void 0:g[c],N=await St(L(t,c),e[c],{name:(V==null?void 0:V.name)||c,label:V==null?void 0:V.label,values:t,bails:(A=(_=r==null?void 0:r.bailsMap)===null||_===void 0?void 0:_[c])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},N),{path:c})});let a=!0;const d=await Promise.all(u),f={},h={};for(const c of d)f[c.path]={valid:c.valid,errors:c.errors},c.valid||(a=!1,h[c.path]=c.errors[0]);return{valid:a,results:f,errors:h,source:"schema"}}let ft=0;function yr(e,t){const{value:r,initialValue:l,setInitialValue:u}=pr(e,t.modelValue,t.form);if(!t.form){let h=function(V){var N;"value"in V&&(r.value=V.value),"errors"in V&&g(V.errors),"touched"in V&&(A.touched=(N=V.touched)!==null&&N!==void 0?N:A.touched),"initialValue"in V&&u(V.initialValue)};const{errors:c,setErrors:g}=Or(),_=ft>=Number.MAX_SAFE_INTEGER?0:++ft,A=br(r,l,c,t.schema);return{id:_,path:e,value:r,initialValue:l,meta:A,flags:{pendingUnmount:{[_]:!1},pendingReset:!1},errors:c,setState:h}}const a=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),d=F(()=>a.errors);function f(h){var c,g,_;"value"in h&&(r.value=h.value),"errors"in h&&((c=t.form)===null||c===void 0||c.setFieldError(P(e),h.errors)),"touched"in h&&((g=t.form)===null||g===void 0||g.setFieldTouched(P(e),(_=h.touched)!==null&&_!==void 0?_:!1)),"initialValue"in h&&u(h.initialValue)}return{id:Array.isArray(a.id)?a.id[a.id.length-1]:a.id,path:e,value:r,errors:d,meta:a,initialValue:l,flags:a.__flags,setState:f}}function pr(e,t,r){const l=Y(P(t));function u(){return r?L(r.initialValues.value,P(e),P(l)):P(l)}function a(c){if(!r){l.value=c;return}r.setFieldInitialValue(P(e),c,!0)}const d=F(u);if(!r)return{value:Y(u()),initialValue:d,setInitialValue:a};const f=gr(t,r,d,e);return r.stageInitialValue(P(e),f,!0),{value:F({get(){return L(r.values,P(e))},set(c){r.setFieldValue(P(e),c,!1)}}),initialValue:d,setInitialValue:a}}function gr(e,t,r,l){return we(e)?P(e):e!==void 0?e:L(t.values,P(l),P(r))}function br(e,t,r,l){const u=F(()=>{var d,f,h;return(h=(f=(d=m(l))===null||d===void 0?void 0:d.describe)===null||f===void 0?void 0:f.call(d).required)!==null&&h!==void 0?h:!1}),a=Fe({touched:!1,pending:!1,valid:!0,required:u,validated:!!P(r).length,initialValue:F(()=>P(t)),dirty:F(()=>!D(P(e),P(t)))});return ce(r,d=>{a.valid=!d.length},{immediate:!0,flush:"sync"}),a}function Or(){const e=Y([]);return{errors:e,setErrors:t=>{e.value=Ye(t)}}}function Vr(e,t,r){return pt(void 0)?Sr(e,t):jt(e,t)}function jt(e,t,r){const{initialValue:l,validateOnMount:u,bails:a,type:d,checkedValue:f,label:h,validateOnValueUpdate:c,uncheckedValue:g,controlled:_,keepValueOnUnmount:A,syncVModel:V,form:N}=_r(),W=_?Ot(Ce):void 0,S=N||W,q=F(()=>be(m(e))),X=F(()=>{if(m(S==null?void 0:S.schema))return;const O=P(t);return Pe(O)||J(O)||z(O)||Array.isArray(O)?O:_t(O)}),Re=!z(X.value)&&J(m(t)),{id:fe,value:ve,initialValue:ae,meta:T,setState:he,errors:_e,flags:ue}=yr(q,{modelValue:l,form:S,bails:a,label:h,type:d,validate:X.value?ie:void 0,schema:Re?t:void 0}),K=F(()=>_e.value[0]);V&&Ar({value:ve,prop:V,handleChange:M,shouldValidate:()=>c&&!ue.pendingReset});const me=(v,O=!1)=>{T.touched=!0,O&&ne()};async function Se(v){var O,w;if(S!=null&&S.validateSchema){const{results:j}=await S.validateSchema(v);return(O=j[m(q)])!==null&&O!==void 0?O:{valid:!0,errors:[]}}return X.value?St(ve.value,X.value,{name:m(q),label:m(h),values:(w=S==null?void 0:S.values)!==null&&w!==void 0?w:{},bails:a}):{valid:!0,errors:[]}}const ne=He(async()=>(T.pending=!0,T.validated=!0,Se("validated-only")),v=>(ue.pendingUnmount[B.id]||(he({errors:v.errors}),T.pending=!1,T.valid=v.valid),v)),ee=He(async()=>Se("silent"),v=>(T.valid=v.valid,v));function ie(v){return(v==null?void 0:v.mode)==="silent"?ee():ne()}function M(v,O=!0){const w=Ie(v);pe(w,O)}ht(()=>{if(u)return ne();(!S||!S.validateSchema)&&ee()});function Te(v){T.touched=v}function le(v){var O;const w=v&&"value"in v?v.value:ae.value;he({value:E(w),initialValue:E(w),touched:(O=v==null?void 0:v.touched)!==null&&O!==void 0?O:!1,errors:(v==null?void 0:v.errors)||[]}),T.pending=!1,T.validated=!1,ee()}const oe=Xe();function pe(v,O=!0){ve.value=oe&&V?er(v,oe.props.modelModifiers):v,(O?ne:ee)()}function Ae(v){he({errors:Array.isArray(v)?v:[v]})}const Ze=F({get(){return ve.value},set(v){pe(v,c)}}),B={id:fe,name:q,label:h,value:Ze,meta:T,errors:_e,errorMessage:K,type:d,checkedValue:f,uncheckedValue:g,bails:a,keepValueOnUnmount:A,resetField:le,handleReset:()=>le(),validate:ie,handleChange:M,handleBlur:me,setState:he,setTouched:Te,setErrors:Ae,setValue:pe};if(Ke(Gt,B),we(t)&&typeof P(t)!="function"&&ce(t,(v,O)=>{D(v,O)||(T.validated?ne():ee())},{deep:!0}),!S)return B;const Me=F(()=>{const v=X.value;return!v||z(v)||Pe(v)||J(v)||Array.isArray(v)?{}:Object.keys(v).reduce((O,w)=>{const j=ar(v[w]).map(te=>te.__locatorRef).reduce((te,Q)=>{const G=L(S.values,Q)||S.values[Q];return G!==void 0&&(te[Q]=G),te},{});return Object.assign(O,j),O},{})});return ce(Me,(v,O)=>{if(!Object.keys(v).length)return;!D(v,O)&&(T.validated?ne():ee())}),xt(()=>{var v;const O=(v=m(B.keepValueOnUnmount))!==null&&v!==void 0?v:m(S.keepValuesOnUnmount),w=m(q);if(O||!S||ue.pendingUnmount[B.id]){S==null||S.removePathState(w,fe);return}ue.pendingUnmount[B.id]=!0;const j=S.getPathState(w);if(Array.isArray(j==null?void 0:j.id)&&(j!=null&&j.multiple)?j!=null&&j.id.includes(B.id):(j==null?void 0:j.id)===B.id){if(j!=null&&j.multiple&&Array.isArray(j.value)){const Q=j.value.findIndex(G=>D(G,m(B.checkedValue)));if(Q>-1){const G=[...j.value];G.splice(Q,1),S.setFieldValue(w,G)}Array.isArray(j.id)&&j.id.splice(j.id.indexOf(B.id),1)}else S.unsetPathValue(m(q));S.removePathState(w,fe)}}),B}function _r(e){return Object.assign(Object.assign({},{initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),{initialValue:void 0})}function Sr(e,t,r){const l=Ot(Ce),u=void 0,a=void 0;function d(f){const h=f.handleChange,c=F(()=>{const _=m(f.value),A=m(u);return Array.isArray(_)?_.findIndex(V=>D(V,A))>=0:D(A,_)});function g(_,A=!0){var V,N;if(c.value===((V=_==null?void 0:_.target)===null||V===void 0?void 0:V.checked)){A&&f.validate();return}const W=m(e),S=l==null?void 0:l.getPathState(W),q=Ie(_);let X=(N=m(u))!==null&&N!==void 0?N:q;l&&(S!=null&&S.multiple)&&S.type==="checkbox"&&(X=Zt(L(l.values,W)||[],X,void 0)),h(X,A)}return Object.assign(Object.assign({},f),{checked:c,checkedValue:u,uncheckedValue:a,handleChange:g})}return d(jt(e,t))}function Ar({prop:e,value:t,handleChange:r,shouldValidate:l}){const u=Xe();if(!u||!e)return;const a=typeof e=="string"?e:"modelValue",d=`update:${a}`;a in u.props&&(ce(t,f=>{D(f,vt(u,a))||u.emit(d,f)}),ce(()=>vt(u,a),f=>{if(f===at&&t.value===void 0)return;const h=f===at?void 0:f;D(h,t.value)||r(h,l())}))}function vt(e,t){if(e)return e.props[t]}let Er=0;const je=["bails","fieldsCount","id","multiple","type","validate"];function Ft(e){const t=(e==null?void 0:e.initialValues)||{},r=Object.assign({},m(t)),l=P(e==null?void 0:e.validationSchema);return l&&J(l)&&z(l.cast)?E(l.cast(r)||{}):E(r)}function Nr(e){var t;const r=Er++,l=(e==null?void 0:e.name)||"Form";let u=0;const a=Y(!1),d=Y(!1),f=Y(0),h=[],c=Fe(Ft(e)),g=Y([]),_=Y({}),A=Y({}),V=tr(()=>{A.value=g.value.reduce((i,n)=>(i[be(m(n.path))]=n,i),{})});function N(i,n){const o=M(i);if(!o){typeof i=="string"&&(_.value[be(i)]=Ye(n));return}if(typeof i=="string"){const s=be(i);_.value[s]&&delete _.value[s]}o.errors=Ye(n),o.valid=!o.errors.length}function W(i){$(i).forEach(n=>{N(n,i[n])})}e!=null&&e.initialErrors&&W(e.initialErrors);const S=F(()=>{const i=g.value.reduce((n,o)=>(o.errors.length&&(n[m(o.path)]=o.errors),n),{});return Object.assign(Object.assign({},_.value),i)}),q=F(()=>$(S.value).reduce((i,n)=>{const o=S.value[n];return o!=null&&o.length&&(i[n]=o[0]),i},{})),X=F(()=>g.value.reduce((i,n)=>(i[m(n.path)]={name:m(n.path)||"",label:n.label||""},i),{})),Re=F(()=>g.value.reduce((i,n)=>{var o;return i[m(n.path)]=(o=n.bails)!==null&&o!==void 0?o:!0,i},{})),fe=Object.assign({},(e==null?void 0:e.initialErrors)||{}),ve=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:ae,originalInitialValues:T,setInitialValues:he}=Fr(g,c,e),_e=jr(g,c,T,q),ue=F(()=>g.value.reduce((i,n)=>{const o=L(c,m(n.path));return re(i,m(n.path),o),i},{})),K=e==null?void 0:e.validationSchema;function me(i,n){var o,s;const p=F(()=>L(ae.value,m(i))),b=A.value[m(i)],y=(n==null?void 0:n.type)==="checkbox"||(n==null?void 0:n.type)==="radio";if(b&&y){b.multiple=!0;const H=u++;return Array.isArray(b.id)?b.id.push(H):b.id=[b.id,H],b.fieldsCount++,b.__flags.pendingUnmount[H]=!1,b}const C=F(()=>L(c,m(i))),R=m(i),k=le.findIndex(H=>H===R);k!==-1&&le.splice(k,1);const I=F(()=>{var H,ge,xe,ze;const Le=m(K);if(J(Le))return(ge=(H=Le.describe)===null||H===void 0?void 0:H.call(Le,m(i)).required)!==null&&ge!==void 0?ge:!1;const $e=m(n==null?void 0:n.schema);return J($e)&&(ze=(xe=$e.describe)===null||xe===void 0?void 0:xe.call($e).required)!==null&&ze!==void 0?ze:!1}),U=u++,x=Fe({id:U,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=fe[R])===null||o===void 0)&&o.length),required:I,initialValue:p,errors:Dt([]),bails:(s=n==null?void 0:n.bails)!==null&&s!==void 0?s:!1,label:n==null?void 0:n.label,type:(n==null?void 0:n.type)||"default",value:C,multiple:!1,__flags:{pendingUnmount:{[U]:!1},pendingReset:!1},fieldsCount:1,validate:n==null?void 0:n.validate,dirty:F(()=>!D(P(C),P(p)))});return g.value.push(x),A.value[R]=x,V(),q.value[R]&&!fe[R]&&Z(()=>{se(R,{mode:"silent"})}),we(i)&&ce(i,H=>{V();const ge=E(C.value);A.value[H]=x,Z(()=>{re(c,H,ge)})}),x}const Se=ct(rt,5),ne=ct(rt,5),ee=He(async i=>await(i==="silent"?Se():ne()),(i,[n])=>{const o=$(O.errorBag.value),p=[...new Set([...$(i.results),...g.value.map(b=>b.path),...o])].sort().reduce((b,y)=>{var C;const R=y,k=M(R)||Te(R),I=((C=i.results[R])===null||C===void 0?void 0:C.errors)||[],U=m(k==null?void 0:k.path)||R,x=wr({errors:I,valid:!I.length},b.results[U]);return b.results[U]=x,x.valid||(b.errors[U]=x.errors[0]),k&&_.value[U]&&delete _.value[U],k?(k.valid=x.valid,n==="silent"||n==="validated-only"&&!k.validated||N(k,x.errors),b):(N(U,I),b)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(p.values=i.values,p.source=i.source),$(p.results).forEach(b=>{var y;const C=M(b);C&&n!=="silent"&&(n==="validated-only"&&!C.validated||N(C,(y=p.results[b])===null||y===void 0?void 0:y.errors))}),p});function ie(i){g.value.forEach(i)}function M(i){const n=typeof i=="string"?be(i):i;return typeof n=="string"?A.value[n]:n}function Te(i){return g.value.filter(o=>i.startsWith(m(o.path))).reduce((o,s)=>o?s.path.length>o.path.length?s:o:s,void 0)}let le=[],oe;function pe(i){return le.push(i),oe||(oe=Z(()=>{[...le].sort().reverse().forEach(o=>{st(c,o)}),le=[],oe=null})),oe}function Ae(i){return function(o,s){return function(b){return b instanceof Event&&(b.preventDefault(),b.stopPropagation()),ie(y=>y.touched=!0),a.value=!0,f.value++,ye().then(y=>{const C=E(c);if(y.valid&&typeof o=="function"){const R=E(ue.value);let k=i?R:C;return y.values&&(k=y.source==="schema"?y.values:Object.assign({},k,y.values)),o(k,{evt:b,controlledValues:R,setErrors:W,setFieldError:N,setTouched:ke,setFieldTouched:G,setValues:te,setFieldValue:w,resetForm:Ue,resetField:et})}!y.valid&&typeof s=="function"&&s({values:C,evt:b,errors:y.errors,results:y.results})}).then(y=>(a.value=!1,y),y=>{throw a.value=!1,y})}}}const B=Ae(!1);B.withControlled=Ae(!0);function Me(i,n){const o=g.value.findIndex(p=>p.path===i&&(Array.isArray(p.id)?p.id.includes(n):p.id===n)),s=g.value[o];if(!(o===-1||!s)){if(Z(()=>{se(i,{mode:"silent",warn:!1})}),s.multiple&&s.fieldsCount&&s.fieldsCount--,Array.isArray(s.id)){const p=s.id.indexOf(n);p>=0&&s.id.splice(p,1),delete s.__flags.pendingUnmount[n]}(!s.multiple||s.fieldsCount<=0)&&(g.value.splice(o,1),tt(i),V(),delete A.value[i])}}function v(i){$(A.value).forEach(n=>{n.startsWith(i)&&delete A.value[n]}),g.value=g.value.filter(n=>!n.path.startsWith(i)),Z(()=>{V()})}const O={name:l,formId:r,values:c,controlledValues:ue,errorBag:S,errors:q,schema:K,submitCount:f,meta:_e,isSubmitting:a,isValidating:d,fieldArrays:h,keepValuesOnUnmount:ve,validateSchema:P(K)?ee:void 0,validate:ye,setFieldError:N,validateField:se,setFieldValue:w,setValues:te,setErrors:W,setFieldTouched:G,setTouched:ke,resetForm:Ue,resetField:et,handleSubmit:B,useFieldModel:Rt,defineInputBinds:Tt,defineComponentBinds:Mt,defineField:De,stageInitialValue:Ct,unsetInitialValue:tt,setFieldInitialValue:Be,createPathState:me,getPathState:M,unsetPathValue:pe,removePathState:Me,initialValues:ae,getAllPathStates:()=>g.value,destroyPath:v,isFieldTouched:wt,isFieldDirty:Pt,isFieldValid:It};function w(i,n,o=!0){const s=E(n),p=typeof i=="string"?i:i.path;M(p)||me(p),re(c,p,s),o&&se(p)}function j(i,n=!0){$(c).forEach(o=>{delete c[o]}),$(i).forEach(o=>{w(o,i[o],!1)}),n&&ye()}function te(i,n=!0){Ve(c,i),h.forEach(o=>o&&o.reset()),n&&ye()}function Q(i,n){const o=M(m(i))||me(i);return F({get(){return o.value},set(s){var p;const b=m(i);w(b,s,(p=m(n))!==null&&p!==void 0?p:!1)}})}function G(i,n){const o=M(i);o&&(o.touched=n)}function wt(i){const n=M(i);return n?n.touched:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function Pt(i){const n=M(i);return n?n.dirty:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function It(i){const n=M(i);return n?n.valid:g.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function ke(i){if(typeof i=="boolean"){ie(n=>{n.touched=i});return}$(i).forEach(n=>{G(n,!!i[n])})}function et(i,n){var o;const s=n&&"value"in n?n.value:L(ae.value,i),p=M(i);p&&(p.__flags.pendingReset=!0),Be(i,E(s),!0),w(i,s,!1),G(i,(o=n==null?void 0:n.touched)!==null&&o!==void 0?o:!1),N(i,(n==null?void 0:n.errors)||[]),Z(()=>{p&&(p.__flags.pendingReset=!1)})}function Ue(i,n){let o=E(i!=null&&i.values?i.values:T.value);o=n!=null&&n.force?o:Ve(T.value,o),o=J(K)&&z(K.cast)?K.cast(o):o,he(o,{force:n==null?void 0:n.force}),ie(s=>{var p;s.__flags.pendingReset=!0,s.validated=!1,s.touched=((p=i==null?void 0:i.touched)===null||p===void 0?void 0:p[m(s.path)])||!1,w(m(s.path),L(o,m(s.path)),!1),N(m(s.path),void 0)}),n!=null&&n.force?j(o,!1):te(o,!1),W((i==null?void 0:i.errors)||{}),f.value=(i==null?void 0:i.submitCount)||0,Z(()=>{ye({mode:"silent"}),ie(s=>{s.__flags.pendingReset=!1})})}async function ye(i){const n=(i==null?void 0:i.mode)||"force";if(n==="force"&&ie(y=>y.validated=!0),O.validateSchema)return O.validateSchema(n);d.value=!0;const o=await Promise.all(g.value.map(y=>y.validate?y.validate(i).then(C=>({key:m(y.path),valid:C.valid,errors:C.errors,value:C.value})):Promise.resolve({key:m(y.path),valid:!0,errors:[],value:void 0})));d.value=!1;const s={},p={},b={};for(const y of o)s[y.key]={valid:y.valid,errors:y.errors},y.value&&re(b,y.key,y.value),y.errors.length&&(p[y.key]=y.errors[0]);return{valid:o.every(y=>y.valid),results:s,errors:p,values:b,source:"fields"}}async function se(i,n){var o;const s=M(i);if(s&&(n==null?void 0:n.mode)!=="silent"&&(s.validated=!0),K){const{results:p}=await ee((n==null?void 0:n.mode)||"validated-only");return p[i]||{errors:[],valid:!0}}return s!=null&&s.validate?s.validate(n):(!s&&(o=n==null?void 0:n.warn),Promise.resolve({errors:[],valid:!0}))}function tt(i){st(ae.value,i)}function Ct(i,n,o=!1){Be(i,n),re(c,i,n),o&&!(e!=null&&e.initialValues)&&re(T.value,i,E(n))}function Be(i,n,o=!1){re(ae.value,i,E(n)),o&&re(T.value,i,E(n))}async function rt(){const i=P(K);if(!i)return{valid:!0,results:{},errors:{},source:"none"};d.value=!0;const n=Pe(i)||J(i)?await hr(i,c):await mr(i,c,{names:X.value,bailsMap:Re.value});return d.value=!1,n}const Nt=B((i,{evt:n})=>{Qt(n)&&n.target.submit()});ht(()=>{if(e!=null&&e.initialErrors&&W(e.initialErrors),e!=null&&e.initialTouched&&ke(e.initialTouched),e!=null&&e.validateOnMount){ye();return}O.validateSchema&&O.validateSchema("silent")}),we(K)&&ce(K,()=>{var i;(i=O.validateSchema)===null||i===void 0||i.call(O,"validated-only")}),Ke(Ce,O);function De(i,n){const o=z(n)||n==null?void 0:n.label,s=M(m(i))||me(i,{label:o}),p=()=>z(n)?n(Ee(s,je)):n||{};function b(){var I;s.touched=!0,((I=p().validateOnBlur)!==null&&I!==void 0?I:Oe().validateOnBlur)&&se(m(s.path))}function y(){var I;((I=p().validateOnInput)!==null&&I!==void 0?I:Oe().validateOnInput)&&Z(()=>{se(m(s.path))})}function C(){var I;((I=p().validateOnChange)!==null&&I!==void 0?I:Oe().validateOnChange)&&Z(()=>{se(m(s.path))})}const R=F(()=>{const I={onChange:C,onInput:y,onBlur:b};return z(n)?Object.assign(Object.assign({},I),n(Ee(s,je)).props||{}):n!=null&&n.props?Object.assign(Object.assign({},I),n.props(Ee(s,je))):I});return[Q(i,()=>{var I,U,x;return(x=(I=p().validateOnModelUpdate)!==null&&I!==void 0?I:(U=Oe())===null||U===void 0?void 0:U.validateOnModelUpdate)!==null&&x!==void 0?x:!0}),R]}function Rt(i){return Array.isArray(i)?i.map(n=>Q(n,!0)):Q(i)}function Tt(i,n){const[o,s]=De(i,n);function p(){s.value.onBlur()}function b(C){const R=Ie(C);w(m(i),R,!1),s.value.onInput()}function y(C){const R=Ie(C);w(m(i),R,!1),s.value.onChange()}return F(()=>Object.assign(Object.assign({},s.value),{onBlur:p,onInput:b,onChange:y,value:o.value}))}function Mt(i,n){const[o,s]=De(i,n),p=M(m(i));function b(y){o.value=y}return F(()=>{const y=z(n)?n(Ee(p,je)):n||{};return Object.assign({[y.model||"modelValue"]:o.value,[`onUpdate:${y.model||"modelValue"}`]:b},s.value)})}const nt=Object.assign(Object.assign({},O),{values:Ut(c),handleReset:()=>Ue(),submitForm:Nt});return Ke(Kt,nt),nt}function jr(e,t,r,l){const u={touched:"some",pending:"some",valid:"every"},a=F(()=>!D(t,P(r)));function d(){const h=e.value;return $(u).reduce((c,g)=>{const _=u[g];return c[g]=h[_](A=>A[g]),c},{})}const f=Fe(d());return Bt(()=>{const h=d();f.touched=h.touched,f.valid=h.valid,f.pending=h.pending}),F(()=>Object.assign(Object.assign({initialValues:P(r)},f),{valid:f.valid&&!$(l.value).length,dirty:a.value}))}function Fr(e,t,r){const l=Ft(r),u=Y(l),a=Y(E(l));function d(f,h){h!=null&&h.force?(u.value=E(f),a.value=E(f)):(u.value=Ve(E(u.value)||{},E(f)),a.value=Ve(E(a.value)||{},E(f))),h!=null&&h.updateFields&&e.value.forEach(c=>{if(c.touched)return;const _=L(u.value,m(c.path));re(t,m(c.path),E(_))})}return{initialValues:u,originalInitialValues:a,setInitialValues:d}}function wr(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}function Rr(e,t){var d;const r=m(e),l=mt(Ce,null);if(r&&!l)throw new Error(`Field with name "${e}" must be used within a component that provides a FormContext, e.g. by using useForm()`);const u=r?Vr(r,void 0):null,a=u?u.value:t;return{field:u,value:a,errors:(d=u==null?void 0:u.errors)!=null?d:Y([])}}export{Nr as a,Qe as c,Cr as e,Ne as i,Rr as u};
